<app-nav-belt></app-nav-belt>
<app-nav-categories></app-nav-categories>
<div class="side-menu">
  <app-left-bar></app-left-bar>
</div>


  <h2 class="section-title">{{ 'USER_PRODUCTS.TITLE' | translate }}</h2>
  <p class="pp">{{ 'USER_PRODUCTS.DESCRIPTION' | translate }}</p>
  <br>
<div class="user-products-container">
  @if (productos.length === 0) {
    <p class="no-products">{{ 'USER_PRODUCTS.NO_PRODUCT' | translate }}</p>
  } @else {
    <div class="product-list">
      @for (producto of productos; track producto.id) {
        <div class="product-row">
          <img [src]="producto.imagen ?? 'assets/img/no-image.png'" class="product-thumb" />
        
          <div class="product-info-block">
            <div class="product-texts">
              <span class="product-price">{{ producto.precio }} €</span>
              <h3 class="product-title">{{ producto.titulo }}</h3>
            </div>
            <!--  
            <div class="product-meta">
              <div class="product-meta-row">
                <span class="meta-publicado">{{ 'USER_PRODUCTS.PUBLICATED' | translate }}</span>
                <span class="meta-modificado">{{ 'USER_PRODUCTS.MODIFIED' | translate }}</span>
              </div>
              <div class="product-meta-row">
                <span class="meta-pp">{{ producto.publicado }}</span>
                <span class="meta-pm">{{ producto.modificado }}</span>
              </div>
            </div>
            -->
            
          </div>
        
          <div class="product-actions-right">
            <button class="icon-btn-delete" (click)="eliminarProducto(producto.id)">
              <svg width="19" height="19" viewBox="0 0 14 16" xmlns="http://www.w3.org/2000/svg" display="flex"><g id="Version-2" fill="none" fill-rule="evenodd"><g id="Catalog---Actions---Hover" transform="translate(-715 -281)" fill="currentColor"><g id="Group" transform="translate(380 272)"><g id="Group-2" transform="translate(325)"><path d="M23.022 12.63v.03a.643.643 0 0 1-.621.615H11.576c-.319 0-.598-.289-.598-.618 0-.346.294-.649.629-.649h10.794c.325 0 .621.296.621.621zm-1.605 10.475c-.021.208-1.173.945-4.588.945-3.468 0-4.273-.749-4.287-.937l-.691-8.73h10.115l-.549 8.722zm-7.033-12.118c0-.64.379-1.037.989-1.037h2.989c.632 0 1.074.427 1.074 1.037v.071h-5.052v-.07zM18.362 9c1.17 0 2.052.855 2.052 1.987v.071h1.987c.867 0 1.599.72 1.599 1.571v.03c0 .657-.438 1.232-1.038 1.46l-.568 9.042C22.327 24.31 20.246 25 16.829 25c-4.463 0-5.212-1.138-5.262-1.817l-.724-9.145A1.587 1.587 0 0 1 10 12.657c0-.867.736-1.599 1.607-1.599h1.799v-.07c0-1.17.809-1.988 1.967-1.988h2.989zm-1.637 12.84c.27 0 .49-.212.49-.474V16.14a.482.482 0 0 0-.49-.475.482.482 0 0 0-.489.475v5.226c0 .262.22.475.49.475zm2.451 0c.27 0 .489-.212.489-.474V16.14a.482.482 0 0 0-.489-.475.482.482 0 0 0-.489.475v5.226c0 .262.219.475.489.475zm-4.766 0c.27 0 .49-.212.49-.474V16.14a.482.482 0 0 0-.49-.475.482.482 0 0 0-.489.475v5.226c0 .262.22.475.49.475z" id="trash"></path></g></g></g></g></svg>
            </button>
            <button class="icon-btn-edit" (click)="editarProducto(producto.id)">
              <svg width="29" height="29" viewBox="0 0 29 29" xmlns="http://www.w3.org/2000/svg" display="flex"><g id="Artboard" fill="none" fill-rule="evenodd" transform="translate(-82 -12)"><path d="M103.834 21.27l-1.31 1.31-2.978-2.977 1.31-1.311a.485.485 0 0 1 .348-.141.54.54 0 0 1 .385.162l2.225 2.224a.52.52 0 0 1 .02.733zM88.717 33.898a.247.247 0 0 1-.335-.322l1.715-3.961 2.449 2.449-3.829 1.834zm9.912-13.379l2.978 2.978-7.874 7.87a.145.145 0 0 1-.099-.048l-2.827-2.826c-.048-.049-.05-.096-.055-.096l7.877-7.878zm6.101-.898l-2.225-2.225a1.837 1.837 0 0 0-1.301-.541c-.46 0-.917.173-1.264.52L89.835 27.48a1.261 1.261 0 0 0-.209.289.632.632 0 0 0-.268.288l-2.165 5.003a1.55 1.55 0 0 0 .346 1.727 1.548 1.548 0 0 0 1.737.28l5.022-2.406a.633.633 0 0 0 .317-.345c.01-.01.021-.016.03-.025l10.105-10.105c.704-.703.694-1.851-.02-2.565z" id="Fill-1" fill="currentColor"></path></g></svg>
            </button>
            <button class="icon-btn-edit" (click)="toggleInfo(producto)">
              <svg width="29px" height="29px" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" display="flex"><path fill-rule="evenodd" clip-rule="evenodd" d="M24 34h2V7a3 3 0 013-3h2a3 3 0 013 3v27h1a1 1 0 110 2H5a1 1 0 110-2h1V21a3 3 0 013-3h2a3 3 0 013 3v13h2v-6a3 3 0 013-3h2a3 3 0 013 3v6zm5-28a1 1 0 00-1 1v27h4V7a1 1 0 00-1-1h-2zm-7 28v-6a1 1 0 00-1-1h-2a1 1 0 00-1 1v6h4zM8 21a1 1 0 011-1h2a1 1 0 011 1v13H8V21z" fill="currentColor"></path></svg>
            </button> 
          </div>
          @if (isInfoVisible) {
            <div class="modal-overlay" (click)="closeModal()" role="dialog" aria-modal="true" id="product-info-dialog">
              <div class="modal-content" (click)="$event.stopPropagation()">
                <div class="modal-header">
                  <h2 id="modal-title">{{ 'USER_PRODUCTS.STATS' | translate }}</h2>
                  <button class="close-button" (click)="closeModal()" aria-label="Close">×</button>
                </div>
                <br>
                <div class="dialog-body">
                  <p><strong>{{ 'USER_PRODUCTS.PRODUCT' | translate }}:</strong> {{ selectedProduct?.titulo }}</p>
                  <p><strong>{{ 'USER_PRODUCTS.VISUALIZATIONS' | translate }}:</strong> {{ selectedProduct?.views }}</p>
                  <p><strong>{{ 'USER_PRODUCTS.SALES' | translate }}:</strong> {{ selectedProduct?.ventas }}</p>
                </div>
              </div>
            </div>
          }
        </div>
      }
    </div>
  }
</div>
